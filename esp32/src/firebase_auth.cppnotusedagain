#include <config.h>
#include <firebase_auth.h>

FirebaseApp app;
WiFiClientSecure ssl_client;
AsyncClientClass aClient(ssl_client);
UserAuth user_auth(API_KEY, USER_EMAIL, USER_PASSWORD, AUTH_EXPIRE_PERIOD);

bool initializeFirebase() {
  Serial.println("🔥 Initializing Firebase...");

  // Configure SSL client
  ssl_client.setInsecure();

  // Initialize Firebase app with auth callback
  initializeApp(aClient, app, getAuth(user_auth));

  // Wait a moment for initialization
  delay(1000);

  if (app.ready()) {
    Serial.println("✅ Firebase initialized successfully");
    Serial.printf("📡 Project ID: %s\n", FIREBASE_PROJECT_ID);
    return true;
  } else {
    Serial.println(app.isAuthenticated());
    Serial.println("❌ Firebase initialization failed");
    return false;
  }
}
